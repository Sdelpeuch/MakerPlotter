

/*Example sketch to control a stepper motor with A4988 stepper motor driver and Arduino without a library. More info: https://www.makerguides.com */
#include <Servo.h>
#include "drawer.h"

//Position deer1[] = {{0.279, 0.422}, {0.273, 0.419}, {0.265, 0.415}, {0.256, 0.413}, {0.254, 0.409}, {0.257, 0.403}, {0.26, 0.396}, {0.258, 0.396}, {0.253, 0.402}, {0.249, 0.408}, {0.244, 0.409}, {0.237, 0.404}, {0.24, 0.399}, {0.243, 0.393}, {0.242, 0.387}, {0.24, 0.38}, {0.24, 0.386}, {0.239, 0.393}, {0.233, 0.398}, {0.232, 0.393}, {0.23, 0.393}, {0.229, 0.4}, {0.231, 0.406}, {0.237, 0.41}, {0.244, 0.415}, {0.252, 0.418}, {0.261, 0.42}, {0.267, 0.425}, {-1.0, -1.0}, {-1.0, -1.0}};
//Position deer2[] = {{0.267, 0.425}, {0.259, 0.422}, {0.25, 0.42}, {0.24, 0.42}, {0.231, 0.419}, {0.233, 0.425}, {0.238, 0.43}, {0.244, 0.435}, {0.253, 0.438}, {0.259, 0.441}, {0.256, 0.447}, {0.254, 0.454}, {0.253, 0.46}, {0.255, 0.467}, {0.257, 0.473}, {0.265, 0.477}, {0.273, 0.48}, {-1.0, -1.0}, {-1.0, -1.0}};
//Position deer3[] = {{0.279, 0.464}, {0.27, 0.462}, {0.264, 0.458}, {0.263, 0.451}, {0.262, 0.445}, {0.261, 0.438}, {0.261, 0.432}, {0.267, 0.426}, {0.275, 0.423}, {-1.0, -1.0}};
//Position deer4[] = {{0.279, 0.422}, {0.285, 0.419}, {0.293, 0.415}, {0.302, 0.413}, {0.304, 0.409}, {0.301, 0.403}, {0.298, 0.396}, {0.3, 0.396}, {0.305, 0.402}, {0.309, 0.408}, {0.314, 0.409}, {0.321, 0.404}, {0.318, 0.399}, {0.315, 0.393}, {0.316, 0.387}, {0.318, 0.38}, {0.318, 0.386}, {0.319, 0.393}, {0.325, 0.398}, {0.326, 0.393}, {0.328, 0.393}, {0.329, 0.4}, {0.327, 0.406}, {0.321, 0.411}, {0.314, 0.415}, {0.306, 0.418}, {0.297, 0.42}, {0.291, 0.425}, {-1.0, -1.0}};
//Position deer5[] = {{0.291, 0.425}, {0.299, 0.422}, {0.308, 0.42}, {0.318, 0.42}, {0.327, 0.419}, {0.325, 0.425}, {0.32, 0.43}, {0.314, 0.435}, {0.305, 0.438}, {0.299, 0.441}, {0.302, 0.447}, {0.304, 0.454}, {0.305, 0.46}, {0.303, 0.467}, {0.301, 0.473}, {0.293, 0.477}, {0.285, 0.48}, {-1.0, -1.0}};


void led_switch(int state){
  if (state==1) {
    digitalWrite(led,HIGH);
  }
  if (state==0) {
    digitalWrite(led,LOW);
  }
  else{
    digitalWrite(led,HIGH);
    delay(200);
    digitalWrite(led,LOW);
  }
}

Drawer* drawer;
Control* control;

void setup() {

  pinMode(led,OUTPUT);
  led_switch(2);
  Serial.begin(9600);
  Board board = generateBoard(Little);
  control = new Control(board, board.getInitial(), 0.01);
  drawer = new Drawer(*control);
}

void loop() {
    led_switch(1);
//    Position square1[] = {{0.20,0.5},{0.20,0.36},{0.358,0.36},{0.358,0.5}, {0.20,0.5},{-1.0,-1.0}};
//    Position* square[] = {square1, nullptr};
    Position* deer0 = new Position[29];
    deer0[0] = {0.279, 0.422};
    deer0[1] = {0.273, 0.419};
    deer0[2] = {0.265, 0.415};
    deer0[3] = {0.256, 0.413};
    deer0[4] = {0.254, 0.409};
    deer0[5] = {0.257, 0.403};
    deer0[6] = {0.26, 0.396};
    deer0[7] = {0.258, 0.396};
    deer0[8] = {0.253, 0.402};
    deer0[9] = {0.249, 0.408};
    deer0[10] = {0.244, 0.409};
    deer0[11] = {0.237, 0.404};
    deer0[12] = {0.24, 0.399};
    deer0[13] = {0.243, 0.393};
    deer0[14] = {0.242, 0.387};
    deer0[15] = {0.24, 0.38};
    deer0[16] = {0.24, 0.386};
    deer0[17] = {0.239, 0.393};
    deer0[18] = {0.233, 0.398};
    deer0[19] = {0.232, 0.393};
    deer0[20] = {0.23, 0.393};
    deer0[21] = {0.229, 0.4};
    deer0[22] = {0.231, 0.406};
    deer0[23] = {0.237, 0.41};
    deer0[24] = {0.244, 0.415};
    deer0[25] = {0.252, 0.418};
    deer0[26] = {0.261, 0.42};
    deer0[27] = {0.267, 0.425};
    deer0[27] = { -1.0, -1.0};

    Position* deer1 = new Position[18];
    deer1[0] = {0.267, 0.425};
    deer1[1] = {0.259, 0.422};
    deer1[2] = {0.25, 0.42};
    deer1[3] = {0.24, 0.42};
    deer1[4] = {0.231, 0.419};
    deer1[5] = {0.233, 0.425};
    deer1[6] = {0.238, 0.43};
    deer1[7] = {0.244, 0.435};
    deer1[8] = {0.253, 0.438};
    deer1[9] = {0.259, 0.441};
    deer1[10] = {0.256, 0.447};
    deer1[11] = {0.254, 0.454};
    deer1[12] = {0.253, 0.46};
    deer1[13] = {0.255, 0.467};
    deer1[14] = {0.257, 0.473};
    deer1[15] = {0.265, 0.477};
    deer1[16] = {0.273, 0.48};
    deer1[16] = { -1.0, -1.0};

    Position* deer2 = new Position[10];
    deer2[0] = {0.279, 0.464};
    deer2[1] = {0.27, 0.462};
    deer2[2] = {0.264, 0.458};
    deer2[3] = {0.263, 0.451};
    deer2[4] = {0.262, 0.445};
    deer2[5] = {0.261, 0.438};
    deer2[6] = {0.261, 0.432};
    deer2[7] = {0.267, 0.426};
    deer2[8] = {0.275, 0.423};
    deer2[8] = { -1.0, -1.0};

    Position* deer[] = {deer0, deer1, deer2, nullptr};
    drawer->draw(deer);
    delete[] deer1;
    delete[] deer2;
    delete[] deer0;

    Position* deer3 = new Position[29];
    deer3[0] = {0.279, 0.422};
    deer3[1] = {0.285, 0.419};
    deer3[2] = {0.293, 0.415};
    deer3[3] = {0.302, 0.413};
    deer3[4] = {0.304, 0.409};
    deer3[5] = {0.301, 0.403};
    deer3[6] = {0.298, 0.396};
    deer3[7] = {0.3, 0.396};
    deer3[8] = {0.305, 0.402};
    deer3[9] = {0.309, 0.408};
    deer3[10] = {0.314, 0.409};
    deer3[11] = {0.321, 0.404};
    deer3[12] = {0.318, 0.399};
    deer3[13] = {0.315, 0.393};
    deer3[14] = {0.316, 0.387};
    deer3[15] = {0.318, 0.38};
    deer3[16] = {0.318, 0.386};
    deer3[17] = {0.319, 0.393};
    deer3[18] = {0.325, 0.398};
    deer3[19] = {0.326, 0.393};
    deer3[20] = {0.328, 0.393};
    deer3[21] = {0.329, 0.4};
    deer3[22] = {0.327, 0.406};
    deer3[23] = {0.321, 0.411};
    deer3[24] = {0.314, 0.415};
    deer3[25] = {0.306, 0.418};
    deer3[26] = {0.297, 0.42};
    deer3[27] = {0.291, 0.425};
    deer3[27] = { -1.0, -1.0};


    Position* deer4 = new Position[18];
    deer4[0] = {0.291, 0.425};
    deer4[1] = {0.299, 0.422};
    deer4[2] = {0.308, 0.42};
    deer4[3] = {0.318, 0.42};
    deer4[4] = {0.327, 0.419};
    deer4[5] = {0.325, 0.425};
    deer4[6] = {0.32, 0.43};
    deer4[7] = {0.314, 0.435};
    deer4[8] = {0.305, 0.438};
    deer4[9] = {0.299, 0.441};
    deer4[10] = {0.302, 0.447};
    deer4[11] = {0.304, 0.454};
    deer4[12] = {0.305, 0.46};
    deer4[13] = {0.303, 0.467};
    deer4[14] = {0.301, 0.473};
    deer4[15] = {0.293, 0.477};
    deer4[16] = {0.285, 0.48};
    deer4[16] = { -1.0, -1.0};

    Position* deer5 = new Position[10];
    deer5[0] = {0.279, 0.464};
    deer5[1] = {0.288, 0.462};
    deer5[2] = {0.294, 0.458};
    deer5[3] = {0.295, 0.451};
    deer5[4] = {0.296, 0.445};
    deer5[5] = {0.297, 0.438};
    deer5[6] = {0.297, 0.432};
    deer5[7] = {0.291, 0.426};
    deer5[8] = {0.283, 0.423};
    deer5[8] = { -1.0, -1.0};

    Position* deerPart2[] = {deer3, deer4, deer5, nullptr};
    drawer->draw(deerPart2);
    delete[] deer3;
    delete[] deer4;
    delete[] deer5;

    Position* deer6 = new Position[14];
    deer6[0] = {0.287, 0.457};
    deer6[1] = {0.287, 0.45};
    deer6[2] = {0.281, 0.445};
    deer6[3] = {0.279, 0.447};
    deer6[4] = {0.279, 0.454};
    deer6[5] = {0.286, 0.457};
    deer6[6] = {0.28, 0.46};
    deer6[7] = {0.273, 0.458};
    deer6[8] = {0.271, 0.452};
    deer6[9] = {0.274, 0.446};
    deer6[10] = {0.279, 0.445};
    deer6[11] = {0.279, 0.452};
    deer6[12] = {0.275, 0.456};
    deer6[12] = { -1.0, -1.0};
    Position* deerPart3[] = {deer6, nullptr};
    drawer->draw(deerPart3);
    delete[] deer6;

    led_switch(0);
}
