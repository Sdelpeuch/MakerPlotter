

/*Example sketch to control a stepper motor with A4988 stepper motor driver and Arduino without a library. More info: https://www.makerguides.com */
#include <Servo.h>
#include "drawer.h"

//Position deer1[] = {{0.279, 0.422}, {0.273, 0.419}, {0.265, 0.415}, {0.256, 0.413}, {0.254, 0.409}, {0.257, 0.403}, {0.26, 0.396}, {0.258, 0.396}, {0.253, 0.402}, {0.249, 0.408}, {0.244, 0.409}, {0.237, 0.404}, {0.24, 0.399}, {0.243, 0.393}, {0.242, 0.387}, {0.24, 0.38}, {0.24, 0.386}, {0.239, 0.393}, {0.233, 0.398}, {0.232, 0.393}, {0.23, 0.393}, {0.229, 0.4}, {0.231, 0.406}, {0.237, 0.41}, {0.244, 0.415}, {0.252, 0.418}, {0.261, 0.42}, {0.267, 0.425}, {-1.0, -1.0}, {-1.0, -1.0}};
//Position deer2[] = {{0.267, 0.425}, {0.259, 0.422}, {0.25, 0.42}, {0.24, 0.42}, {0.231, 0.419}, {0.233, 0.425}, {0.238, 0.43}, {0.244, 0.435}, {0.253, 0.438}, {0.259, 0.441}, {0.256, 0.447}, {0.254, 0.454}, {0.253, 0.46}, {0.255, 0.467}, {0.257, 0.473}, {0.265, 0.477}, {0.273, 0.48}, {-1.0, -1.0}, {-1.0, -1.0}};
//Position deer3[] = {{0.279, 0.464}, {0.27, 0.462}, {0.264, 0.458}, {0.263, 0.451}, {0.262, 0.445}, {0.261, 0.438}, {0.261, 0.432}, {0.267, 0.426}, {0.275, 0.423}, {-1.0, -1.0}};
//Position deer4[] = {{0.279, 0.422}, {0.285, 0.419}, {0.293, 0.415}, {0.302, 0.413}, {0.304, 0.409}, {0.301, 0.403}, {0.298, 0.396}, {0.3, 0.396}, {0.305, 0.402}, {0.309, 0.408}, {0.314, 0.409}, {0.321, 0.404}, {0.318, 0.399}, {0.315, 0.393}, {0.316, 0.387}, {0.318, 0.38}, {0.318, 0.386}, {0.319, 0.393}, {0.325, 0.398}, {0.326, 0.393}, {0.328, 0.393}, {0.329, 0.4}, {0.327, 0.406}, {0.321, 0.411}, {0.314, 0.415}, {0.306, 0.418}, {0.297, 0.42}, {0.291, 0.425}, {-1.0, -1.0}};
//Position deer5[] = {{0.291, 0.425}, {0.299, 0.422}, {0.308, 0.42}, {0.318, 0.42}, {0.327, 0.419}, {0.325, 0.425}, {0.32, 0.43}, {0.314, 0.435}, {0.305, 0.438}, {0.299, 0.441}, {0.302, 0.447}, {0.304, 0.454}, {0.305, 0.46}, {0.303, 0.467}, {0.301, 0.473}, {0.293, 0.477}, {0.285, 0.48}, {-1.0, -1.0}};


void led_switch(int state){
  if (state==1) {
    digitalWrite(led,HIGH);
  }
  if (state==0) {
    digitalWrite(led,LOW);
  }
  else{
    digitalWrite(led,HIGH);
    delay(200);
    digitalWrite(led,LOW);
  }
}

Drawer* drawer;
Control* control;

void setup() {

  pinMode(led,OUTPUT);
  led_switch(2);
  Serial.begin(9600);
  Board board = generateBoard(Little);
  control = new Control(board, board.getInitial(), 0.01);
  drawer = new Drawer(*control);
}

void loop() {
    led_switch(1);
//    Position square1[] = {{0.20,0.5},{0.20,0.36},{0.358,0.36},{0.358,0.5}, {0.20,0.5},{-1.0,-1.0}};
//    Position* square[] = {square1, nullptr};
    aDraw(drawer);

    led_switch(0);
}
